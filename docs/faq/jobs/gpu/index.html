<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-faq/jobs/gpu">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">GPU | Sharanga</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://sharanga.hpc.bits-hyderabad.ac.in/docs/faq/jobs/gpu"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="GPU | Sharanga"><meta data-rh="true" name="description" content="Job Scheduling for GPU"><meta data-rh="true" property="og:description" content="Job Scheduling for GPU"><link data-rh="true" rel="icon" href="/img/favicon.svg"><link data-rh="true" rel="canonical" href="https://sharanga.hpc.bits-hyderabad.ac.in/docs/faq/jobs/gpu"><link data-rh="true" rel="alternate" href="https://sharanga.hpc.bits-hyderabad.ac.in/docs/faq/jobs/gpu" hreflang="en"><link data-rh="true" rel="alternate" href="https://sharanga.hpc.bits-hyderabad.ac.in/docs/faq/jobs/gpu" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.8c164bf0.css">
<link rel="preload" href="/assets/js/runtime~main.85cc8eec.js" as="script">
<link rel="preload" href="/assets/js/main.acde4f84.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/sharanga.svg" alt="Sharanga Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/sharanga.svg" alt="Sharanga Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate"></b></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/docs/misc_docs/configuration/">Configuration</a><a class="navbar__item navbar__link" href="/docs/misc_docs/usage/">Usage Policy</a><a class="navbar__item navbar__link" href="/docs/misc_docs/software/">Software</a><a class="navbar__item navbar__link" href="/docs/faq/">FAQs</a><a class="navbar__item navbar__link" href="/docs/misc_docs/contact/">Contact Us</a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><div class="navbar__search searchBarContainer_NW3z"><input placeholder="Search" aria-label="Search" class="navbar__search-input"><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/faq/">List of contents</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/faq/accounts">Accounts</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/faq/login">Login</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/faq/storage">Storage</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/faq/files">Files and Directories</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link" href="/docs/faq/package/">Package Management</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/faq/package/module">With ModuleFiles</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/faq/package/spack">With Spack</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--active" href="/docs/faq/jobs/">Job Scheduling</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/faq/jobs/distributed">Distributed CPU</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/faq/jobs/shared">Shared CPU</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/faq/jobs/gpu">GPU</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link" href="/docs/faq/software/">Software</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/faq/software/mpi">MPI</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/faq/software/cuda">CUDA</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/faq/software/anaconda">Anaconda</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/faq/software/apptainer">Apptainer (Singularity)</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/faq/misc">Miscellaneous</a></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col"><div class="docItemContainer_Djhp"><article><div class="theme-doc-markdown markdown"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="job-scheduling-for-gpu">Job Scheduling for GPU<a href="#job-scheduling-for-gpu" class="hash-link" aria-label="Direct link to Job Scheduling for GPU" title="Direct link to Job Scheduling for GPU">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="how-to-schedule-a-gpu-parallel-job-on-slurm">How to schedule a GPU parallel job on Slurm?<a href="#how-to-schedule-a-gpu-parallel-job-on-slurm" class="hash-link" aria-label="Direct link to How to schedule a GPU parallel job on Slurm?" title="Direct link to How to schedule a GPU parallel job on Slurm?">​</a></h3><p>Users can use the <code>sbatch</code> command provided by Slurm to submit a job script. Note that, for loading the required packages one can use either <code>Modulefiles</code> or <code>Spack</code>. In the following we have shown example job scripts using <code>Modulefiles</code> and <code>Spack</code>.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="example-of-a-job-script-using-modulefiles">Example of a job script using Modulefiles<a href="#example-of-a-job-script-using-modulefiles" class="hash-link" aria-label="Direct link to Example of a job script using Modulefiles" title="Direct link to Example of a job script using Modulefiles">​</a></h4><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_vqWU"><div class="codeBlockContainer_X7hc language-bash theme-code-block"><div class="codeBlockContent_vqWU" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-bash codeBlock_wPnj thin-scrollbar"><code class="codeBlockLines_fQUY"><span class="token-line" style="color:#393A34"><span class="token shebang important">#!/bin/bash</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#SBATCH -p gpu</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#SBATCH -N 1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#SBATCH -n 1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#SBATCH --mem 512M</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#SBATCH -t 0-4:51 # time (D-HH:MM)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#SBATCH --job-name=&quot;hello_test&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#SBATCH -o slurm.%j.out</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#SBATCH -e slurm.%j.err</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#SBATCH --gres=gpu:1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#SBATCH --mail-user=&lt;username&gt;@hyderabad.bits-pilani.ac.in</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#SBATCH --mail-type=ALL</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">module load cuda-11.0.2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">srun ./execname</span><br></span></code></pre></div></div><div class="buttonGroup_Z1Dm"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>To submit the above job script use the following command.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_vqWU"><div class="codeBlockContainer_X7hc language-bash theme-code-block"><div class="codeBlockContent_vqWU" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-bash codeBlock_wPnj thin-scrollbar"><code class="codeBlockLines_fQUY"><span class="token-line" style="color:#393A34"><span class="token plain">$ sbatch job.sh</span><br></span></code></pre></div></div><div class="buttonGroup_Z1Dm"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>If you wish to test your job script and want to find when it is estimated to run, please run</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_vqWU"><div class="codeBlockContainer_X7hc language-bash theme-code-block"><div class="codeBlockContent_vqWU" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-bash codeBlock_wPnj thin-scrollbar"><code class="codeBlockLines_fQUY"><span class="token-line" style="color:#393A34"><span class="token plain">$ sbatch --test-only job.sh</span><br></span></code></pre></div></div><div class="buttonGroup_Z1Dm"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Note that this does not actually submit the job. A detailed explanation for each code snippet of the job script <code>job.sh</code> is given below.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_vqWU"><div class="codeBlockContainer_X7hc language-bash theme-code-block"><div class="codeBlockContent_vqWU" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-bash codeBlock_wPnj thin-scrollbar"><code class="codeBlockLines_fQUY"><span class="token-line" style="color:#393A34"><span class="token shebang important">#!/bin/bash</span><br></span></code></pre></div></div><div class="buttonGroup_Z1Dm"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This is the standard convention to let the linux shell know what interpreter to run.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_vqWU"><div class="codeBlockContainer_X7hc language-bash theme-code-block"><div class="codeBlockContent_vqWU" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-bash codeBlock_wPnj thin-scrollbar"><code class="codeBlockLines_fQUY"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">#SBATCH -p gpu</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#SBATCH -N 1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#SBATCH -n 1</span><br></span></code></pre></div></div><div class="buttonGroup_Z1Dm"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Configuration variables for Slurm start with <code>SBATCH</code>.</p><ul><li><p><code>-p</code> refers to the partition to be used by Slurm. Sharanga provides
two partitions, namely, <code>compute</code> and <code>gpu</code>. For jobs to be executed
exclusively on GPUs, we use the <code>gpu</code> partition.</p></li><li><p><code>-N</code> represents the number of nodes to be used. In the present
example, we are using 1 node. Note that, at present, Sharanga has
provision for only one GPU node.</p></li><li><p><code>-n</code> represents the number of tasks to be executed. For codes
employing distributed parallelism such as GPGPUs or hybrid parallel
models based on CPUs and GPUs, users are requested to specify the
number of tasks as the number of compute cores required. In the
present example, n is set to 1.</p></li></ul><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_vqWU"><div class="codeBlockContainer_X7hc language-bash theme-code-block"><div class="codeBlockContent_vqWU" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-bash codeBlock_wPnj thin-scrollbar"><code class="codeBlockLines_fQUY"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">#SBATCH --mem 512M</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#SBATCH -t 0-4:51 # time (D-HH:MM)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#SBATCH --job-name=&quot;hello_test&quot;</span><br></span></code></pre></div></div><div class="buttonGroup_Z1Dm"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li><p><code>--mem</code> represents the maximum amount of required memory. Here, we
are requesting 512 Megabytes of memory. Note that Slurm
prioritises lower memory jobs over higher memory jobs in the queue.
This may result in delayed execution of higher memory jobs.
Therefore, users are requested to give accurate and desirable memory
limits.</p></li><li><p><code>-t</code> represents the maximum wall clock time the job requires. Here,
we are requesting 0 days, 4 hours and 51 minutes. Slurm
prioritises shorter time limit jobs over longer time limit jobs in
the queue. This may result in delayed execution of longer time limit
jobs. Therefore, users are requested to give accurate and desirable
time limits. Note that setting values greater than 24 hours will
result in the termination of the job by Slurm automatically.</p></li><li><p><code>--job-name</code> represents the name of the job.</p></li></ul><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_vqWU"><div class="codeBlockContainer_X7hc language-bash theme-code-block"><div class="codeBlockContent_vqWU" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-bash codeBlock_wPnj thin-scrollbar"><code class="codeBlockLines_fQUY"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">#SBATCH -o slurm.%j.out</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#SBATCH -e slurm.%j.err</span><br></span></code></pre></div></div><div class="buttonGroup_Z1Dm"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li><p><code>-o</code> represents <code>stdout</code>.</p></li><li><p><code>-e</code> represents <code>stderr</code>.</p></li></ul><p>We are instructing Slurm to redirect <code>stdout</code> and <code>stderr</code> of the
executed application to disk. For example, if your <code>jobid</code> is 121,
then <code>slurm.121.out</code> would contain the normal output of the application,
while <code>slurm.121.err</code> would contain the error output of the application.
These files will be stored in the directory, where the jobs were
launched from.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_vqWU"><div class="codeBlockContainer_X7hc language-bash theme-code-block"><div class="codeBlockContent_vqWU" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-bash codeBlock_wPnj thin-scrollbar"><code class="codeBlockLines_fQUY"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">#SBATCH --gres=gpu:1</span><br></span></code></pre></div></div><div class="buttonGroup_Z1Dm"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li><code>-gres</code> represents <code>generic resource</code>. Here, we are informing Slurm
that our job requires 1 GPU card of any type.</li></ul><p>We are instructing Slurm to redirect <code>stdout</code> and <code>stderr</code> of the
executed application to disk. For example, if your <code>jobid</code> is 121,
then <code>slurm.121.out</code> would contain the normal output of the application,
while <code>slurm.121.err</code> would contain the error output of the application.
These files will be stored in the directory, where the jobs were
launched from.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_vqWU"><div class="codeBlockContainer_X7hc language-bash theme-code-block"><div class="codeBlockContent_vqWU" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-bash codeBlock_wPnj thin-scrollbar"><code class="codeBlockLines_fQUY"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">#SBATCH --mail-user=&lt;username&gt;@hyderabad.bits-pilani.ac.in</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#SBATCH --mail-type=ALL</span><br></span></code></pre></div></div><div class="buttonGroup_Z1Dm"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li><p><code>–mail-user</code> represents the email address to which job events are to
be delivered.</p></li><li><p><code>–mail-type</code> represents the type of events to be logged. Valid type
values are NONE, BEGIN, END, FAIL, REQUEUE, ALL (equivalent to
BEGIN, END, FAIL, REQUEUE, and STAGE<!-- -->_<!-- -->OUT), STAGE<!-- -->_<!-- -->OUT (burst buffer
stage out and teardown completed), TIME<!-- -->_<!-- -->LIMIT, TIME<!-- -->_<!-- -->LIMIT<!-- -->_<!-- -->90
(reached 90 percent of time limit), TIME<!-- -->_<!-- -->LIMIT<!-- -->_<!-- -->80 (reached 80
percent of time limit) and TIME<!-- -->_<!-- -->LIMIT<!-- -->_<!-- -->50 (reached 50 percent of
time limit). Here, we have specified the event type to be <code>ALL</code>.</p></li></ul><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_vqWU"><div class="codeBlockContainer_X7hc language-bash theme-code-block"><div class="codeBlockContent_vqWU" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-bash codeBlock_wPnj thin-scrollbar"><code class="codeBlockLines_fQUY"><span class="token-line" style="color:#393A34"><span class="token plain">module load cuda-11.0.2</span><br></span></code></pre></div></div><div class="buttonGroup_Z1Dm"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>We are using Modulefiles to set the environment needed to run our
application. The example application depends on <code>CUDA</code>, which is an
Nvidia framework for allowing users to utilise GPUs.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_vqWU"><div class="codeBlockContainer_X7hc language-bash theme-code-block"><div class="codeBlockContent_vqWU" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-bash codeBlock_wPnj thin-scrollbar"><code class="codeBlockLines_fQUY"><span class="token-line" style="color:#393A34"><span class="token plain">srun ./execname</span><br></span></code></pre></div></div><div class="buttonGroup_Z1Dm"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Finally, we are using <code>srun</code> to start the execution of the application.
This is somewhat analogous to <code>mpirun</code>. Users are requested <strong>not</strong> to
use <code>mpirun</code> and instead use <code>srun</code>. <code>srun</code> takes care of the allocation
and efficient management of resources via Slurm automatically.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="example-of-a-job-script-using-spack">Example of a job script using Spack<a href="#example-of-a-job-script-using-spack" class="hash-link" aria-label="Direct link to Example of a job script using Spack" title="Direct link to Example of a job script using Spack">​</a></h4><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_vqWU"><div class="codeBlockContainer_X7hc language-bash theme-code-block"><div class="codeBlockContent_vqWU" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-bash codeBlock_wPnj thin-scrollbar"><code class="codeBlockLines_fQUY"><span class="token-line" style="color:#393A34"><span class="token shebang important">#!/bin/bash</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#SBATCH -p gpu</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#SBATCH -N 1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#SBATCH -n 1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#SBATCH --mem 512M</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#SBATCH -t 0-4:51 # time (D-HH:MM)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#SBATCH --job-name=&quot;hello_test&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#SBATCH -o slurm.%j.out</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#SBATCH -e slurm.%j.err</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#SBATCH --gres=gpu:1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#SBATCH --mail-user=&lt;username&gt;@hyderabad.bits-pilani.ac.in</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#SBATCH --mail-type=ALL</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spack load cuda@11.0.2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">srun ./execname</span><br></span></code></pre></div></div><div class="buttonGroup_Z1Dm"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>To submit the above job script use the following command.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_vqWU"><div class="codeBlockContainer_X7hc language-bash theme-code-block"><div class="codeBlockContent_vqWU" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-bash codeBlock_wPnj thin-scrollbar"><code class="codeBlockLines_fQUY"><span class="token-line" style="color:#393A34"><span class="token plain">$ sbatch job.sh</span><br></span></code></pre></div></div><div class="buttonGroup_Z1Dm"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>If you wish to test your job script and want to find when it is
estimated to run, please run</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_vqWU"><div class="codeBlockContainer_X7hc language-bash theme-code-block"><div class="codeBlockContent_vqWU" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-bash codeBlock_wPnj thin-scrollbar"><code class="codeBlockLines_fQUY"><span class="token-line" style="color:#393A34"><span class="token plain">$ sbatch --test-only job.sh</span><br></span></code></pre></div></div><div class="buttonGroup_Z1Dm"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Note that this does not actually submit the job. A detailed explanation
for each code snippet of the job script <code>job.sh</code> is given below.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_vqWU"><div class="codeBlockContainer_X7hc language-bash theme-code-block"><div class="codeBlockContent_vqWU" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-bash codeBlock_wPnj thin-scrollbar"><code class="codeBlockLines_fQUY"><span class="token-line" style="color:#393A34"><span class="token shebang important">#!/bin/bash</span><br></span></code></pre></div></div><div class="buttonGroup_Z1Dm"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This is the standard convention to let the linux shell know what
interpreter to run.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_vqWU"><div class="codeBlockContainer_X7hc language-bash theme-code-block"><div class="codeBlockContent_vqWU" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-bash codeBlock_wPnj thin-scrollbar"><code class="codeBlockLines_fQUY"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">#SBATCH -p gpu</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#SBATCH -N 1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#SBATCH -n 1</span><br></span></code></pre></div></div><div class="buttonGroup_Z1Dm"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Configuration variables for Slurm start with <code>SBATCH</code>.</p><ul><li><p><code>-p</code> refers to the partition to be used by Slurm. Sharanga provides
two partitions, namely, <code>compute</code> and <code>gpu</code>. For jobs to be executed
exclusively on GPUs, we use the <code>gpu</code> partition.</p></li><li><p><code>-N</code> represents the number of nodes to be used. In the present
example, we are using 1 node. Note that, at present, Sharanga has
provision for only one GPU node.</p></li><li><p><code>-n</code> represents the number of tasks to be executed. For codes
employing distributed parallelism such as GPGPUs or hybrid parallel
models based on CPUs and GPUs, users are requested to specify the
number of tasks as the number of compute cores required. In the
present example, n is set to 1.</p></li></ul><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_vqWU"><div class="codeBlockContainer_X7hc language-bash theme-code-block"><div class="codeBlockContent_vqWU" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-bash codeBlock_wPnj thin-scrollbar"><code class="codeBlockLines_fQUY"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">#SBATCH --mem 512M</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#SBATCH -t 0-4:51 # time (D-HH:MM)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#SBATCH --job-name=&quot;hello_test&quot;</span><br></span></code></pre></div></div><div class="buttonGroup_Z1Dm"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li><p><code>--mem</code> represents the maximum amount of required memory. Here, we
are requesting 512 Megabytes of memory. Note that Slurm
prioritises lower memory jobs over higher memory jobs in the queue.
This may result in delayed execution of higher memory jobs.
Therefore, users are requested to give accurate and desirable memory
limits.</p></li><li><p><code>-t</code> represents the maximum wall clock time the job requires. Here,
we are requesting 0 days, 4 hours and 51 minutes. Slurm
prioritises shorter time limit jobs over longer time limit jobs in
the queue. This may result in delayed execution of longer time limit
jobs. Therefore, users are requested to give accurate and desirable
time limits. Note that setting values greater than 24 hours will
result in the termination of the job by Slurm automatically.</p></li><li><p><code>--job-name</code> represents the name of the job.</p></li></ul><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_vqWU"><div class="codeBlockContainer_X7hc language-bash theme-code-block"><div class="codeBlockContent_vqWU" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-bash codeBlock_wPnj thin-scrollbar"><code class="codeBlockLines_fQUY"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">#SBATCH -o slurm.%j.out</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#SBATCH -e slurm.%j.err</span><br></span></code></pre></div></div><div class="buttonGroup_Z1Dm"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li><p><code>-o</code> represents <code>stdout</code>.</p></li><li><p><code>-e</code> represents <code>stderr</code>.</p></li></ul><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_vqWU"><div class="codeBlockContainer_X7hc language-bash theme-code-block"><div class="codeBlockContent_vqWU" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-bash codeBlock_wPnj thin-scrollbar"><code class="codeBlockLines_fQUY"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">#SBATCH --gres=gpu:1</span><br></span></code></pre></div></div><div class="buttonGroup_Z1Dm"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li><code>-gres</code> represents <code>generic resource</code>. Here, we are informing Slurm
that our job requires 1 GPU card of any type.</li></ul><p>We are instructing Slurm to redirect <code>stdout</code> and <code>stderr</code> of the executed application to disk. For example, if your <code>jobid</code> is 121, then <code>slurm.121.out</code> would contain the normal output of the application, while <code>slurm.121.err</code> would contain the error output of the application. These files will be stored in the directory where the jobs were launched from.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_vqWU"><div class="codeBlockContainer_X7hc language-bash theme-code-block"><div class="codeBlockContent_vqWU" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-bash codeBlock_wPnj thin-scrollbar"><code class="codeBlockLines_fQUY"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">#SBATCH --mail-user=&lt;username&gt;@hyderabad.bits-pilani.ac.in</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#SBATCH --mail-type=ALL</span><br></span></code></pre></div></div><div class="buttonGroup_Z1Dm"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li><p><code>–mail-user</code> represents the email address to which job events are to
be delivered.</p></li><li><p><code>–mail-type</code> represents the type of events to be logged. Valid type
values are NONE, BEGIN, END, FAIL, REQUEUE, ALL (equivalent to
BEGIN, END, FAIL, REQUEUE, and STAGE<!-- -->_<!-- -->OUT), STAGE<!-- -->_<!-- -->OUT (burst buffer
stage out and teardown completed), TIME<!-- -->_<!-- -->LIMIT, TIME<!-- -->_<!-- -->LIMIT<!-- -->_<!-- -->90
(reached 90 percent of time limit), TIME<!-- -->_<!-- -->LIMIT<!-- -->_<!-- -->80 (reached 80
percent of time limit) and TIME<!-- -->_<!-- -->LIMIT<!-- -->_<!-- -->50 (reached 50 percent of
time limit). Here, we have specified the event type to be <code>ALL</code>.</p></li></ul><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_vqWU"><div class="codeBlockContainer_X7hc language-bash theme-code-block"><div class="codeBlockContent_vqWU" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-bash codeBlock_wPnj thin-scrollbar"><code class="codeBlockLines_fQUY"><span class="token-line" style="color:#393A34"><span class="token plain">spack load cuda@11.0.2</span><br></span></code></pre></div></div><div class="buttonGroup_Z1Dm"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>We are using Spack to set the environment needed to run our application. The example application depends on <code>CUDA</code>, which is an Nvidia framework for allowing users to utilise GPUs.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_vqWU"><div class="codeBlockContainer_X7hc language-bash theme-code-block"><div class="codeBlockContent_vqWU" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-bash codeBlock_wPnj thin-scrollbar"><code class="codeBlockLines_fQUY"><span class="token-line" style="color:#393A34"><span class="token plain">srun ./execname</span><br></span></code></pre></div></div><div class="buttonGroup_Z1Dm"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Finally, we are using <code>srun</code> to start the execution of the application. This is somewhat analogous to <code>mpirun</code>. Users are requested <strong>not</strong> to use <code>mpirun</code> and instead use <code>srun</code>. <code>srun</code> takes care of the allocation and efficient management of resources via Slurm automatically.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"></nav></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row"><div class="left-logo"><a href="https://www.bits-pilani.ac.in/hyderabad/" rel="noopener noreferrer" class="footerLogoLink_BH7S"><img src="/img/BITS_Pilani-Logo.svg" alt="BITS Pilani" class="themedImage_ToTc themedImage--light_HNdA footer__logo" width="65" height="100"><img src="/img/BITS_Pilani-Logo.svg" alt="BITS Pilani" class="themedImage_ToTc themedImage--dark_i4oU footer__logo" width="65" height="100"></a></div><div class="right-links"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">BITS Pilani</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.bits-pilani.ac.in/hyderabad/" target="_blank" rel="noopener noreferrer" class="footer__link-item" logo="[object Object]">Hyderabad Campus</a></li></ul></div></div></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 Sharanga. All rights reserved. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.85cc8eec.js"></script>
<script src="/assets/js/main.acde4f84.js"></script>
</body>
</html>