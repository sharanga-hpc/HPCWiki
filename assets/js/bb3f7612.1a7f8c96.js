"use strict";(self.webpackChunkhpc_wiki=self.webpackChunkhpc_wiki||[]).push([[9934],{3599:(e,s,i)=>{i.r(s),i.d(s,{assets:()=>a,contentTitle:()=>o,default:()=>h,frontMatter:()=>r,metadata:()=>c,toc:()=>l});var n=i(7624),t=i(4552);const r={sidebar_position:5,sidebar_label:"Files and Directories",hide_table_of_contents:!0,hide_title:!0,pagination_next:null,pagination_prev:null,title:"Files and Directories"},o=void 0,c={id:"faq/files",title:"Files and Directories",description:"Files and Directories",source:"@site/docs/faq/files.md",sourceDirName:"faq",slug:"/faq/files",permalink:"/docs/faq/files",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:5,frontMatter:{sidebar_position:5,sidebar_label:"Files and Directories",hide_table_of_contents:!0,hide_title:!0,pagination_next:null,pagination_prev:null,title:"Files and Directories"},sidebar:"FAQ"},a={},l=[{value:"Files and Directories",id:"files-and-directories",level:2},{value:"How to find the last modification date of a file?",id:"how-to-find-the-last-modification-date-of-a-file",level:3},{value:"How to find the deletion date of a file stored in <code>SCRATCH</code>?",id:"how-to-find-the-deletion-date-of-a-file-stored-in-scratch",level:3},{value:"Using <code>date</code>",id:"using-date",level:4},{value:"Using <code>usertools</code>",id:"using-usertools",level:4},{value:"How to copy files or directories from my computer to the HPC cluster?",id:"how-to-copy-files-or-directories-from-my-computer-to-the-hpc-cluster",level:3},{value:"How to copy files or directories from HPC cluster to my computer?",id:"how-to-copy-files-or-directories-from-hpc-cluster-to-my-computer",level:3},{value:"How to access my $HOME directory?",id:"how-to-access-my-home-directory",level:3},{value:"How to access my $SCRATCH space?",id:"how-to-access-my-scratch-space",level:3},{value:"SCP file transfer is very slow. Is it possible to speed it up?",id:"scp-file-transfer-is-very-slow-is-it-possible-to-speed-it-up",level:3},{value:"What is a good strategy for managing my inode usage?",id:"what-is-a-good-strategy-for-managing-my-inode-usage",level:3},{value:"How do I check my inode usage?",id:"how-do-i-check-my-inode-usage",level:3},{value:"How do I remove a large number of files?",id:"how-do-i-remove-a-large-number-of-files",level:3},{value:"Comparison of the two approaches",id:"comparison-of-the-two-approaches",level:4},{value:"Warning",id:"warning",level:4},{value:"How do I selectively delete files?",id:"how-do-i-selectively-delete-files",level:3},{value:"Warning",id:"warning-1",level:4}];function d(e){const s={a:"a",code:"code",h2:"h2",h3:"h3",h4:"h4",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.M)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.h2,{id:"files-and-directories",children:"Files and Directories"}),"\n",(0,n.jsx)(s.h3,{id:"how-to-find-the-last-modification-date-of-a-file",children:"How to find the last modification date of a file?"}),"\n",(0,n.jsxs)(s.p,{children:["Users can use the ",(0,n.jsx)(s.code,{children:"stat"})," command to get the detailed status of a file. For example, if a user has a file called ",(0,n.jsx)(s.code,{children:"example.txt"}),", then the ",(0,n.jsx)(s.code,{children:"stat"})," command can be invoked as"]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-bash",children:"$ stat example.txt\n"})}),"\n",(0,n.jsx)(s.p,{children:"The output will be:"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-bash",children:"File: example.txt\nSize: 0 Blocks: 1 IO Block: 4194304 regular empty file\nDevice: f96638d6h/4184226006d Inode: 144115339825778942  Links: 1\nAccess: (0600/-rw-------) Uid: ( 1000/ nischay) Gid: ( 1000/ nischay)\nAccess: 2020-08-18 23:21:06.000000000 +0530\nModify: 2020-08-18 23:21:06.000000000 +0530\nChange: 2020-08-18 23:21:06.000000000 +0530\n"})}),"\n",(0,n.jsxs)(s.h3,{id:"how-to-find-the-deletion-date-of-a-file-stored-in-scratch",children:["How to find the deletion date of a file stored in ",(0,n.jsx)(s.code,{children:"SCRATCH"}),"?"]}),"\n",(0,n.jsxs)(s.h4,{id:"using-date",children:["Using ",(0,n.jsx)(s.code,{children:"date"})]}),"\n",(0,n.jsxs)(s.p,{children:["The file deletion date of a file can be obtained using the command ",(0,n.jsx)(s.code,{children:"date"}),". For example, if we want to know the deletion date of the file ",(0,n.jsx)(s.code,{children:"example.txt"}),", please type the following command"]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-bash",children:'$ date -d "2020-08-18 23:21:06.000000000 +0530 +15days"\n'})}),"\n",(0,n.jsxs)(s.p,{children:["Here, ",(0,n.jsx)(s.code,{children:"2020-08-18 23:21:06.000000000 +0530"})," is the access time of the file, obtained using the ",(0,n.jsx)(s.code,{children:"stat"})," command as shown earlier. Since the files stores in ",(0,n.jsx)(s.code,{children:"$SCRATCH"})," are automatically deleted after 15 days from its last modification, we need to add ",(0,n.jsx)(s.code,{children:"+15days"})," to the access time. The output of the above command will be:"]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-bash",children:"Wed Sep  2 23:21:06 IST 2020\n"})}),"\n",(0,n.jsxs)(s.h4,{id:"using-usertools",children:["Using ",(0,n.jsx)(s.code,{children:"usertools"})]}),"\n",(0,n.jsxs)(s.p,{children:["Alternatively, users can use the ",(0,n.jsx)(s.code,{children:"usertools"})," command to get the access time and also the time left before deletion with one single command. Please note that ",(0,n.jsx)(s.code,{children:"usertools"})," is ",(0,n.jsx)(s.strong,{children:"not"})," a standard linux command but developed by us to obtain the status of files with ease."]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-bash",children:"$ usertools file access example.txt\n"})}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-bash",children:"Filename: example.txt\nAccess Time: 2020-08-18 23:21:06.100206\nTime Left: 359 hours 59 minutes 52 seconds.\n"})}),"\n",(0,n.jsx)(s.h3,{id:"how-to-copy-files-or-directories-from-my-computer-to-the-hpc-cluster",children:"How to copy files or directories from my computer to the HPC cluster?"}),"\n",(0,n.jsxs)(s.p,{children:["Users of Linux, Windows 10 (1803 and above) and macOS can copy files using ",(0,n.jsx)(s.code,{children:"scp"})," utility. The following commands illustrate copying a file ",(0,n.jsx)(s.code,{children:"example.txt"})," and a directory ",(0,n.jsx)(s.code,{children:"test"})," from a user's personal machine to the HPC facility."]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-bash",children:"$ scp example.txt <user>@login.hpc.bits-hyderabad.ac.in:\n"})}),"\n",(0,n.jsxs)(s.p,{children:["Here ",(0,n.jsx)(s.code,{children:"<user>"})," is the ",(0,n.jsx)(s.code,{children:"username"})," of the account to access the facility. Please note the ",(0,n.jsx)(s.strong,{children:":"})," (colon) after the domain name. By default, if no path is specified after the colon, the file is copied into the ",(0,n.jsx)(s.code,{children:"$HOME"})," directory of the user. Similarly, to copy a directory, ",(0,n.jsx)(s.code,{children:"-r"})," flag is used along with ",(0,n.jsx)(s.code,{children:"scp"}),"."]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-bash",children:"$ scp -r test <user>@login.hpc.bits-hyderabad.ac.in:\n"})}),"\n",(0,n.jsx)(s.p,{children:"Alternatively, the above two commands can be merged into a single command."}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-bash",children:"$ scp -r example.txt test <user>@login.hpc.bits-hyderabad.ac.in:\n"})}),"\n",(0,n.jsxs)(s.p,{children:["Users of ",(0,n.jsx)(s.code,{children:"macOS"})," and ",(0,n.jsx)(s.code,{children:"Linux"})," can use the ",(0,n.jsx)(s.code,{children:"rsync"})," utility, which offers faster resumable transfers."]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-bash",children:"$ rsync -avz --progress test <user>@login.hpc.bits-hyderabad.ac.in:\n"})}),"\n",(0,n.jsx)(s.p,{children:"Here,"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:["\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.code,{children:"-a"})," represents archival mode of transfer, which preserves metadata\nof the file."]}),"\n"]}),"\n",(0,n.jsxs)(s.li,{children:["\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.code,{children:"-v"})," represents verbose mode."]}),"\n"]}),"\n",(0,n.jsxs)(s.li,{children:["\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.code,{children:"-z"})," represents compression mode, which compresses the data during\nthe transfer and thus improves the transfer rate."]}),"\n"]}),"\n",(0,n.jsxs)(s.li,{children:["\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.code,{children:"--progress"})," shows the progress of the transfer."]}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(s.h3,{id:"how-to-copy-files-or-directories-from-hpc-cluster-to-my-computer",children:"How to copy files or directories from HPC cluster to my computer?"}),"\n",(0,n.jsxs)(s.p,{children:["Users can copy a file or directory from the HPC cluster to their machine by using the ",(0,n.jsx)(s.code,{children:"scp"})," command. For example, if a user wishes to transfer a file ",(0,n.jsx)(s.code,{children:"example.txt"})," and a directory ",(0,n.jsx)(s.code,{children:"test"})," stored in ",(0,n.jsx)(s.code,{children:"\\home\\<user>\\result"})," directory, then the following commands can be used."]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-bash",children:"$ scp <user>@login.hpc.bits-hyderabad.ac.in:\\home\\<user>\\result\\example.txt .\n"})}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-bash",children:"$ scp -r <user>@login.hpc.bits-hyderabad.ac.in:\\home\\<user>\\result\\test .\n"})}),"\n",(0,n.jsxs)(s.p,{children:["Here ",(0,n.jsx)(s.code,{children:"<user>"})," is the ",(0,n.jsx)(s.code,{children:"username"})," of the account to access the facility. Please note the ",(0,n.jsx)(s.strong,{children:"."})," (dot symbol) at the end of the command. The above commands copy ",(0,n.jsx)(s.code,{children:"example.txt"})," and ",(0,n.jsx)(s.code,{children:"test"})," into the current directory of the user's terminal on their local machine. For more information on ",(0,n.jsx)(s.code,{children:"scp"})," and ",(0,n.jsx)(s.code,{children:"rsync"}),", users can refer to the ",(0,n.jsx)(s.code,{children:"manpages"})," for the utilities. The manual pages of these commands can be accessed using ",(0,n.jsx)(s.code,{children:"man scp"})," and ",(0,n.jsx)(s.code,{children:"man rsync"}),"."]}),"\n",(0,n.jsx)(s.h3,{id:"how-to-access-my-home-directory",children:"How to access my $HOME directory?"}),"\n",(0,n.jsxs)(s.p,{children:["Users can access their ",(0,n.jsx)(s.code,{children:"$HOME"})," directory by typing ",(0,n.jsx)(s.code,{children:"cd $HOME"})," in a terminal on Sharanga. Note that the home directory of a user is accessible only to that particular user and cannot be viewed or accessed by others in the cluster."]}),"\n",(0,n.jsx)(s.h3,{id:"how-to-access-my-scratch-space",children:"How to access my $SCRATCH space?"}),"\n",(0,n.jsxs)(s.p,{children:["Users can access their ",(0,n.jsx)(s.code,{children:"$SCRATCH"})," space by typing ",(0,n.jsx)(s.code,{children:"cd $SCRATCH"})," in a terminal on Sharanga. Note that the scratch space of a user is accessible only to that particular user and cannot be viewed or accessed by others in the cluster."]}),"\n",(0,n.jsx)(s.h3,{id:"scp-file-transfer-is-very-slow-is-it-possible-to-speed-it-up",children:"SCP file transfer is very slow. Is it possible to speed it up?"}),"\n",(0,n.jsxs)(s.p,{children:["Users are advised to use ",(0,n.jsx)(s.code,{children:"rsync"})," with ",(0,n.jsx)(s.code,{children:"-avz"})," flags for compressible and resumable file transfers."]}),"\n",(0,n.jsx)(s.h3,{id:"what-is-a-good-strategy-for-managing-my-inode-usage",children:"What is a good strategy for managing my inode usage?"}),"\n",(0,n.jsx)(s.p,{children:"To manage inode usage, avoid creating a large number of small files. Instead, aggregate data into fewer, larger files where possible. Periodically review and remove unnecessary files or directories."}),"\n",(0,n.jsx)(s.h3,{id:"how-do-i-check-my-inode-usage",children:"How do I check my inode usage?"}),"\n",(0,n.jsx)(s.p,{children:"To check your inode usage, run the following command:"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-bash",children:"# For /home use\n$ lfs quota /home\n# For /scratch use\n$ lfs quota /scratch\n"})}),"\n",(0,n.jsx)(s.p,{children:"Alternatively, you can check your inode usage for a specific directory by running the following command:"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-bash",children:"$ du --inode /path/to/directory\n"})}),"\n",(0,n.jsx)(s.h3,{id:"how-do-i-remove-a-large-number-of-files",children:"How do I remove a large number of files?"}),"\n",(0,n.jsxs)(s.p,{children:["There are two methods to remove a large number of files that are much faster than using ",(0,n.jsx)(s.code,{children:"rm -rf"}),"."]}),"\n",(0,n.jsxs)(s.ol,{children:["\n",(0,n.jsxs)(s.li,{children:["Using ",(0,n.jsx)(s.a,{href:"https://rsync.samba.org/",children:"RSync"}),"\nLet us say that we want to delete a directory called ",(0,n.jsx)(s.code,{children:"this_directory"}),".\nFirst, create an empty directory."]}),"\n"]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-bash",children:"mkdir empty_dir\n"})}),"\n",(0,n.jsx)(s.p,{children:"Next, run this rsync command to delete the directory:"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-bash",children:"rsync -aP --delete empty_dir/ this_directory/\n"})}),"\n",(0,n.jsxs)(s.p,{children:["This should delete the contents of ",(0,n.jsx)(s.code,{children:"this_directory"}),".\nLastly, run ",(0,n.jsx)(s.code,{children:"rm -r empty_directory"})," and ",(0,n.jsx)(s.code,{children:"rm -r this_directory"})," to remove both the empty directories.\n2. Using Perl\nIf we want to delete a directory ",(0,n.jsx)(s.code,{children:"this_directory"})," with a large number of files, we first enter the directory with ",(0,n.jsx)(s.code,{children:"cd this_directory"}),", after which we can run the following command:"]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-bash",children:"perl -e 'for(<*>){((stat)[9]<(unlink))}'\n"})}),"\n",(0,n.jsx)(s.p,{children:"This will delete all the files inside the directory.\nLastly, to delete the now-empty directory, run"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-bash",children:"cd ..; rm -r this_directory\n"})}),"\n",(0,n.jsx)(s.h4,{id:"comparison-of-the-two-approaches",children:"Comparison of the two approaches"}),"\n",(0,n.jsxs)(s.p,{children:["To delete a test batch of 10,000 files the RSync approach takes 0.136s of real time, while Perl takes 0.0169s.\nIn comparison, ",(0,n.jsx)(s.code,{children:"rm -rf"})," requires at least 0.140s of real time to delete the files, and it becomes considerably slower as the number of files increases.\nThe benefit of using RSync over Perl despite it being slower is that RSync shows progress for the operation."]}),"\n",(0,n.jsx)(s.h4,{id:"warning",children:"Warning"}),"\n",(0,n.jsx)(s.p,{children:"Please exercise caution while deleting files, as it might not be possible to restore them once deleted. Make sure that the files within the directory being deleted are definitely unnecessary."}),"\n",(0,n.jsx)(s.h3,{id:"how-do-i-selectively-delete-files",children:"How do I selectively delete files?"}),"\n",(0,n.jsxs)(s.p,{children:["For selectively deleting files, the ",(0,n.jsx)(s.code,{children:"find"})," command with the ",(0,n.jsx)(s.code,{children:"-delete"})," flag is very helpful.\nFor example, to delete all files with the extension ",(0,n.jsx)(s.code,{children:".ext"})," in a directory, we can use"]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-bash",children:"find . -name \u201c*.ext\u201d -delete\n"})}),"\n",(0,n.jsxs)(s.p,{children:["Please note that this search is recursive, and files with this extension in subdirectories will be deleted as well.\n",(0,n.jsx)(s.code,{children:"find"})," has a number of other ways to match files, including time of creation, regular expressions and permissions among other things.\nYou can find out more about the parameters of ",(0,n.jsx)(s.code,{children:"find"})," by running the command ",(0,n.jsx)(s.code,{children:"man find"}),"."]}),"\n",(0,n.jsx)(s.h4,{id:"warning-1",children:"Warning"}),"\n",(0,n.jsx)(s.p,{children:"Please exercise caution while deleting files, as it might not be possible to restore them once deleted. Make sure that the files within the directory being deleted are definitely unnecessary."})]})}function h(e={}){const{wrapper:s}={...(0,t.M)(),...e.components};return s?(0,n.jsx)(s,{...e,children:(0,n.jsx)(d,{...e})}):d(e)}},4552:(e,s,i)=>{i.d(s,{I:()=>c,M:()=>o});var n=i(1504);const t={},r=n.createContext(t);function o(e){const s=n.useContext(r);return n.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function c(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),n.createElement(r.Provider,{value:s},e.children)}}}]);